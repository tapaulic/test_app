window.webtrendsAsyncInit=function(){(new Webtrends.dcs).init({dcsid:dcsid_var,domain:"stats.elignum.net",timezone:-5,i18n:!0,offsite:!0,onsite:!0,formbutton:!0,rightclick:!0,download:!0,downloadtypes:"xls,doc,pdf,txt,csv,zip,docx,xlsx,rar,gzip,mp3,mp4,ppt,pptx,swf,avi,docm,xlsm,pptm",anchor:!0,javascript:!0,mailto:!0,metanames:"DC.title,DC.identifier",onsitedoms:new RegExp(".toronto.ca"),fpcdom:".toronto.ca",plugins:{debug:{src:"//www1.toronto.ca/wcmAsset/js/web_analytics/webtrends.debug.js"}}}).track()},function(t,e,i,n){function s(t){return t&&(t.forEach||(t.forEach=function(t,e){for(var i=e||window,n=0,s=this.length;n<s;++n)t.call(i,this[n],n,this)}),t.filter||(t.filter=function(t,e){for(var i=e||window,n=[],s=0,r=this.length;s<r;++s)t.call(i,this[s],s,this)&&n.push(this[s]);return n}),t.indexOf||(t.indexOf=function(t,e){for(var i=0;i<this.length;++i)if(this[i]===t)return i;return-1})),t}function r(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i={argsa:t};o.multiTrack(i)}if(!t.Webtrends||!t.Webtrends.tagLoaded){var o={tagLoaded:!0,dcss:{},plugins:{},dcssIdx:0,gWtId:{},addEventListener:t.addEventListener?function(t,e,i){t.addEventListener&&t.addEventListener(e,i,!1)}:function(t,e,i){t.attachEvent&&t.attachEvent("on"+e,i,!1)},events:{},version:"10.3.7",qryparams:{},hasLoaded:!1,dcsdelay:25,init:function(){null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(i.userAgent)&&(o.IE=parseFloat(RegExp.$1)),n.search&&(o.qryparams=o.getQryParams(n.search)),t.webtrendsAsyncInit&&!t.webtrendsAsyncInit.hasRun&&(t.webtrendsAsyncInit(),t.webtrendsAsyncInit.hasRun=!0),o.addEventListener(t,"load",function(t){o.hasLoaded=!0})},isFn:function(t){return"[object Function]"===Object.prototype.toString.call(t)},objectToKVPArray:function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&""!=t[i]&&void 0!=t[i]&&"function"!=typeof t[i]&&e.push({k:i,v:t[i]});return e},extend:function(t,e,i){for(var n in e)(i||void 0===t[n])&&(t[n]=e[n]);return t},find:function(t){return o.selectorEngine||(o.selectorEngine=o.findSelector()),o.selectorEngine(t)},findSelector:function(){var n=/MSIE (\d+)/.exec(i.userAgent),s=n?n[1]:99;if(e.querySelectorAll&&e.body&&s>8){var r=e.body;return function(t){return r.querySelectorAll(t)}}if(t.jQuery)return t.jQuery.find;if(t.Sizzle)return t.Sizzle;if(t.YAHOO&&YAHOO.util&&YAHOO.util.Selector)return YAHOO.util.Selector.query;if("qwery"in t)return qwery;if(t.YUI&&YUI().use("node",function(t){return t.all}),e.querySelectorAll){var r=e.body;return r?function(t){return r.querySelectorAll(t)}:function(t){return[]}}return function(t){return[]}},getQryParams:function(t){var e=t.split(/[&?]/g),i={};try{for(var n=0,s=e.length;n<s;++n){var r=e[n].match(/^([^=]+)(?:=([\s\S]*))?/);if(r&&r[1]){var o="";try{o=decodeURIComponent(r[1])}catch(t){try{o=unescape(r[1])}catch(t){o=r[1]}}var a="";try{a=decodeURIComponent(r[2])}catch(t){try{a=unescape(r[2])}catch(t){a=r[2]}}i[o]?(i[o]=[i[o]],i[o].push(a)):i[o]=a}}}catch(t){}return i},loadJS:function(t,i,n){arguments.length<2&&(i=!0);var s=e.createElement("script");s.type="text/javascript",s.async=i,s.src=t;var r=e.getElementsByTagName("script")[0];r.parentNode.insertBefore(s,r)},elemOfEvent:function(t,e){var i=t.target||t.srcElement;if("string"==typeof e){var n=e;e={},e[n.toUpperCase()]=1}for(;i&&i.tagName&&!e[i.tagName.toUpperCase()];)i=i.parentElement||i.parentNode;return i},dcsEncode:function(t){return"function"==typeof encodeURIComponent?encodeURIComponent(t):escape(t)},multiTrack:function(){for(var t in o.dcss){o.dcss[t].dcsMultiTrack(arguments[0])}return!1},addTransform:function(t,e,i){return e||(e="collect"),i?o.bindEvent("transform."+e,t,i):o.bindEvent("transform."+e,t),this},bindEvent:function(t,n,r){function a(e,i){o.events[t][e.dcssID]||(o.events[t][e.dcssID]=s([])),o.events[t][e.dcssID].push(i)}if(t&&n&&""!=t&&o.isFn(n)){if("wtmouseup"===t&&(t="wtmouse"),"wtmouse"===t&&!o.onMouseBound){var c=/MSIE (\d+)/.exec(i.userAgent),d=c?c[1]:99;o.addEventListener(e,d>=8?"mousedown":"mouseup",function(e){e||(e=window.event),o.broadcastEvent(t,{event:e})}),o.onMouseBound=!0}if(o.events[t]||(o.events[t]={}),r)a(r,n);else for(var h in o.dcss)a(o.dcss[h],n)}},broadcastEvent:function(t,e){for(var i in o.dcss)o.fireEvent(t,o.dcss[i],e)},_callFn:function(t,e,i,n){if("function"==typeof e)return e.onetime?(i.push(e),!0):(e(t,n),!1)},fireEvent:function(t,e,i){var n=s([]);if(o.events[t]&&o.events[t][e.dcssID]){var r=o.events[t][e.dcssID];if(!r.length)return;for(var a=r.length-1;a>=0;a--){var c=r[a];o._callFn(e,c,n,i)&&r.pop()}}n.forEach(function(t){t(e,i)})},registerPlugin:function(t,e){var i=!1;for(var n in o.dcss){var s=o.dcss[n];t in s.plugins&&(i=!0,s.registerPlugin(t,e))}i||e({noOwner:!0})},dcsGetCookie:function(t,i){var n=e.cookie.split("; "),s=[],r=0,o=0,a=t.length,c=n.length;for(o=0;o<c;o++){var d=n[o];d.substring(0,a+1)==t+"="&&(s[r++]=d)}var h=s.length;if(h>0){if(r=0,h>1&&t==i){var f=new Date(0);for(o=0;o<h;o++){var l=parseInt(this.dcsGetCrumb(s[o],"lv")),u=new Date(l);u>f&&(f.setTime(u.getTime()),r=o)}}return unescape(s[r].substring(a+1))}return null},dcsGetCrumb:function(t,e,i){for(var n=t.split(i||":"),s=0;s<n.length;s++){var r=n[s].split("=");if(e==r[0])return r[1]}return null}},a=o.fireEvent,c=o.bindEvent;o.dcs=function(){return this.exre=function(){return t.RegExp?new RegExp("dcs(uri)|(ref)|(aut)|(met)|(sta)|(sip)|(pro)|(byt)|(dat)|(p3p)|(cfg)|(redirect)|(cip)","i"):""}(),this.re={},this.plugins=this.plugins={},this.WT=this.WT={},this.DCS=this.DCS={},this.DCSext=this.DCSext={},this.dcssID=this.dcssID="dcsobj_"+o.dcssIdx++,this.images=this.images=[],this.errors=this.errors=[],this.FPCConfig=this.FPCConfig={},this.TPCConfig=this.TPCConfig={},this.images=[],this.navigationtag=[],this._selectors=[],this._onsitedoms=[],this._downloadtypes=[],this.adclickparam="",this.plugInWaitCount=0,this.gWtAccountRollup="",this.gTempWtId="",this.onMouseBound=!1,this},o.dcs.prototype={init:function(e){function i(t,i){return e.hasOwnProperty(t)?e[t]:i}function n(t,e,i){return t&&t.hasOwnProperty(e)?t[e]:i}this.config=e;var r=this;if(this.errorlogger=i("errorlogger",function(t){}),this.dcsid=this.dcsid=e.dcsid,this.queue=this.queue=i("queue",[]),this.domain=this.domain=i("domain","statse.webtrendslive.com"),this.timezone=this.timezone=i("timezone",-8),this.enabled=this.enabled=i("enabled",!0),this.i18n=this.i18n=i("i18n",!0),this.re=function(){return t.RegExp?r.i18n?{"%25":/\%/g,"%26":/\&/g,"%23":/\#/g}:{"%09":/\t/g,"%20":/ /g,"%23":/\#/g,"%26":/\&/g,"%2B":/\+/g,"%3F":/\?/g,"%5C":/\\/g,"%22":/\"/g,"%7F":/\x7F/g,"%A0":/\xA0/g}:""}(),e.metanames){var a=e.metanames.toLowerCase();this.metanames=s(a.split(","))}return t.webtrendsAsyncLoad&&"function"==typeof t.webtrendsAsyncLoad&&!i("privateFlag",!1)&&o.bindEvent("onready",window.webtrendsAsyncLoad,this),this.vtid=this.vtid=i("vtid",void 0),this.paidsearchparams=i("paidsearchparams","gclid"),this.splitvalue=this.splitvalue=i("splitvalue",""),o.dcsdelay=e.dcsdelay||o.dcsdelay,this.delayAll=this.delayAll=i("delayAll",!1),this.preserve=this.preserve=i("preserve",!0),this.navigationtag=s(i("navigationtag","div,table").toLowerCase().split(",")),this._onsitedoms=i("onsitedoms",""),o.isFn(this._onsitedoms.test)||(this._onsitedoms=s(this._onsitedoms.toLowerCase().split(",")),this._onsitedoms.forEach(function(t,e,i){i[e]=t.replace(/^\s*/,"").replace(/\s*$/,"")})),this._downloadtypes=s(i("downloadtypes","xls,doc,pdf,txt,csv,zip,docx,xlsx,rar,gzip").toLowerCase().split(",")),this._downloadtypes.forEach(function(t,e,i){i[e]=t.replace(/^\s*/,"").replace(/\s*$/,"")}),i("adimpressions",!1)&&(this.adclickparam=i("adsparam","WT.ac")),this.FPCConfig.enabled=this.FPCConfig.enabled=n(e.FPCConfig,"enabled",!0),this.FPCConfig.domain=this.FPCConfig.domain=n(e.FPCConfig,"domain",i("fpcdom","")),this.FPCConfig.name=this.FPCConfig.name=n(e.FPCConfig,"name",i("fpc","WT_FPC")),this.FPCConfig.expiry=this.FPCConfig.expiry=n(e.FPCConfig,"expires",i("cookieexpires",63113851500)),this.FPCConfig.expiry=this.FPCConfig.expiry<63113851500?this.FPCConfig.expiry:63113851500,this.FPCConfig.expireDate=new Date(this.getTime()+this.FPCConfig.expiry),this.FPCConfig.sessionOnly=0===this.FPCConfig.expiry,this.TPCConfig.enabled=this.TPCConfig.enabled=n(e.TPCConfig,"enabled",!i("disablecookie",!1)),this.TPCConfig.cfgType=this.TPCConfig.cfgType=n(e.TPCConfig,"cfgType",this.TPCConfig.enabled?"":"1"),e.cookieTypes&&("none"===e.cookieTypes.toLowerCase()?(this.FPCConfig.enabled=!1,this.TPCConfig.enabled=!1,this.TPCConfig.cfgType="1"):"firstpartyonly"===e.cookieTypes.toLowerCase()?(this.FPCConfig.enabled=!0,this.TPCConfig.enabled=!1,this.TPCConfig.cfgType="1"):"all"===e.cookieTypes.toLowerCase()&&(this.FPCConfig.enabled=!0,this.TPCConfig.enabled=!0,this.TPCConfig.cfgType=n(e.TPCConfig,"cfgType",""))),this.fpc=this.fpc=this.FPCConfig.name,this.fpcdom=this.fpcdom=this.FPCConfig.domain,this.cookieExp=this.cookieExp=this.FPCConfig.expiry,s(i("pageEvents",[])).forEach(function(t){e[t.toLowerCase()]=!0,this._NoopDontCompileMeOut=!0}),i("formbutton",!1)&&this.addFormButtonTracking(),i("offsite",!1)&&this.addOffsiteTracking(),i("onsite",!1)&&this.addOnsiteTracking(),i("download",!1)&&this.addDownloadTracking(),i("anchor",!1)&&this.addAnchorTracking(),i("javascript",!1)&&this.addJavaScriptTracking(),i("mailto",!1)&&this.addMailToTracking(),i("rightclick",!1)&&this.addRightClickTracking(),i("privateFlag",!1)||(o.dcss[this.dcssID]=this),this.plugins=e.plugins||{},this._processPlugins(),o.gWtId[this.domain]||(o.gWtId[this.domain]=""),!i("privateFlag",!1)&&this.FPCConfig.enabled&&this.dcsGetId(this.dcssID),this.checkReady(),this},_processPlugins:function(){for(var e in this.plugins){var i=this.plugins[e];if(!o.plugins[e]){o.plugins[e]=i;var n=i.src;o.isFn(n)?t.setTimeout(function(t){return function(){t()}}(n),1):o.loadJS(n,!1)}if(!i.async){var s=this;i.loaded=!1,this.plugInWaitCount++,i.timeout&&t.setTimeout(function(t){return function(){t.loaded||(t.timedout=!0,s.plugInWaitCount--,s.checkReady())}}(i),i.timeout)}}},dcsGetIdCallback:function(t){void 0!==t&&(!o.gWtId[this.domain]&&t.gTempWtId&&(o.gWtId[this.domain]=t.gTempWtId),this.gTempWtId=t.gTempWtId,!o.gWtId[this.domain]&&t.gWtId&&(o.gWtId[this.domain]=t.gWtId),this.gWtAccountRollup=t.gWtAccountRollup),this.plugInWaitCount--,this.checkReady()},dcsGetId:function(t){if(e.cookie.indexOf(this.FPCConfig.name+"=")==-1&&e.cookie.indexOf("WTLOPTOUT=")==-1&&this.TPCConfig.enabled){if(this.enabled){var i="//"+this.domain+"/"+this.dcsid+"/wtid.js?callback=Webtrends.dcss."+t+".dcsGetIdCallback";o.loadJS(i,!0),this.plugInWaitCount++}return!1}return!0},registerPlugin:function(t,e){var i=this.plugins[t];i&&(o.isFn(e)&&(this.isReady()?e(this,i):c("onready",function(t,e,i){var n=function(){t(e,i)};return n.onetime=!0,n}(e,this,i),this)),i.loaded=!0,i.async||i.timedout||this.plugInWaitCount--),this.checkReady()},isReady:function(){return this.plugInWaitCount<=0},checkReady:function(){this.plugInWaitCount<=0&&this.setReady()},setReady:function(){this._readySet||(a("onready",this),this.flushqueue(),this.redirectqueue(),this._readySet=!0)},flushqueue:function(){for(var t=0;t<this.queue.length;t++)this.doAction(this.queue[t]);this.queue=[]},redirectqueue:function(){var t=this;this.queue.push=function(e){t.doAction(e)}},addTransform:function(t,e){o.addTransform(t,e,this)},addSelector:function(t,e){var i=this,n={domEvent:"click",callback:void 0,argsa:[],args:{},delayTime:void 0,transform:void 0,filter:void 0,actionElems:{A:1,INPUT:1,BUTTON:1},finish:void 0},s=o.extend(n,e,!0);return c("wtmouse",function(e,n){i.addSelectorReal(i,t,o.extend(n,s,!0))},i),this},sendSelectorTrack:function(t,e,i,n){e.element=i,"form"!==n&&"input"!==n&&"button"!==n||(e.domEvent="submit"),t._multiTrack(e)},addSelectorReal:function(t,e,i){var n=o.find;if(n&&i.event&&i.actionElems){var s=o.elemOfEvent(i.event,i.actionElems),r=s.tagName?s.tagName.toLowerCase():"";if(e.toUpperCase()in i.actionElems&&e.toUpperCase()===r.toUpperCase())return this.sendSelectorTrack(t,i,s,r);var a=n(e);if(!a||!s)return;if(a&&a.length)for(var c=0;c<a.length;c++)if(a[c]===s){this.sendSelectorTrack(t,i,s,r);break}}},_dcsGetCookie:function(t,i){var n=s(e.cookie.split("; ")).filter(function(e){return e.indexOf(t+"=")!=-1})[0];return!(!n||n.length<t.length+1)&&(s(n.split(t+"=")[1].split(":")).forEach(function(t){var e=t.split("=");i[e[0]]=e[1]}),!0)},dcsGetCookie:function(t){return o.dcsGetCookie(t,this.FPCConfig.name)},dcsSaveCookie:function(t,i,n){var r=[];s(o.objectToKVPArray(i)).forEach(function(t){r.push(t.k+"="+t.v)}),r=r.sort().join(":"),e.cookie=t+"="+r+n},dcsDeleteCookie:function(t,e,i){var n=t+"=";n+="; expires=expires=Thu, 01 Jan 1970 00:00:01 GMT",n+="; path="+e,n+=i?";domain="+i:"",document.cookie=n},dcsIsFpcSet:function(t,e,i,n){var s={};return this._dcsGetCookie(t,s)?e==s.id&&i==s.lv&&n==s.ss?0:3:2},dcsGetFPC:function(){var t={};return this._dcsGetCookie(this.FPCConfig.name,t),t},dcsFPC:function(){if(e.cookie.indexOf("WTLOPTOUT=")==-1){if(this.FPCConfig.enabled||this.TPCConfig.enabled?this.FPCConfig.enabled&&!this.TPCConfig.enabled?this.WT.ce="1":this.WT.ce="2":this.WT.ce="0",!this.FPCConfig.enabled)return this.WT.vtid=this.vtid?this.vtid:"",void this.dcsDeleteCookie(this.FPCConfig.name,"/",this.FPCConfig.domain);var t=this.WT,i=this.FPCConfig.name,n=new Date,s=6e4*n.getTimezoneOffset()+36e5*this.timezone;n.setTime(n.getTime()+s);var r=new Date(n.getTime());t.co_f=t.vtid=t.vtvs=t.vt_f=t.vt_f_a=t.vt_f_s=t.vt_f_d=t.vt_f_tlh=t.vt_f_tlv="";var a={};if(this._dcsGetCookie(i,a)){var c=a.id,d=parseInt(a.lv),h=parseInt(a.ss);if(null==c||"null"==c||isNaN(d)||isNaN(h))return;t.co_f=c;var f=new Date(d);t.vt_f_tlh=Math.floor((f.getTime()-s)/1e3),r.setTime(h),(n.getTime()>f.getTime()+18e5||n.getTime()>r.getTime()+288e5)&&(t.vt_f_tlv=Math.floor((r.getTime()-s)/1e3),r.setTime(n.getTime()),t.vt_f_s="1"),n.getDate()==f.getDate()&&n.getMonth()==f.getMonth()&&n.getFullYear()==f.getFullYear()||(t.vt_f_d="1")}else{if(this.gTempWtId.length)o.gWtId[this.domain].length?t.co_f=o.gWtId[this.domain]:t.co_f=this.gTempWtId,t.vt_f="1";else if(o.gWtId[this.domain].length)t.co_f=o.gWtId[this.domain];else{t.co_f="2";for(var l=n.getTime().toString(),u=2;u<=32-l.length;u++)t.co_f+=Math.floor(16*Math.random()).toString(16);t.co_f+=l,t.vt_f="1"}0==this.gWtAccountRollup.length&&(t.vt_f_a="1"),t.vt_f_s=t.vt_f_d="1",t.vt_f_tlh=t.vt_f_tlv="0"}t.co_f=escape(t.co_f),t.vtid=void 0===this.vtid?t.co_f:this.vtid||"",t.vtvs=(r.getTime()-s).toString();var g=this.FPCConfig.sessionOnly?"":"; expires="+this.FPCConfig.expireDate.toGMTString(),p=g+"; path=/"+(""!=this.FPCConfig.domain?"; domain="+this.FPCConfig.domain:""),v=n.getTime().toString(),m=r.getTime().toString();a.id=t.co_f,a.lv=v,a.ss=m,this.dcsSaveCookie(i,a,p);var C=this.dcsIsFpcSet(i,t.co_f,v,m);0!=C&&(t.co_f=t.vtvs=t.vt_f_s=t.vt_f_d=t.vt_f_tlh=t.vt_f_tlv="",void 0===this.vtid&&(t.vtid=""),t.vt_f=t.vt_f_a=C)}},track:function(){try{var t;return arguments&&arguments.length>1?t={argsa:Array.prototype.slice.call(arguments)}:1===arguments.length&&(t=arguments[0]),void 0===t&&(t={element:void 0,event:void 0,argsa:[]}),void 0===t.argsa&&(t.argsa=[]),this.enQueue("collect",t),this}catch(t){this.errors.push(t),this.errorlogger(t)}},dcsMultiTrack:function(t){t&&t.length>1&&(t={argsa:Array.prototype.slice.call(arguments)}),this._multiTrack(t)},_multiTrack:function(t){try{if(void 0===t&&(t={}),this.enQueue("multitrack",t),t.delayTime){var e=Number(t.delayTime);this.spinLock(isNaN(e)?o.dcsdelay:e)}else this.delayAll&&this.spinLock(o.dcsdelay);return!1}catch(t){this.errors.push(t),this.errorlogger(t)}},dcsCleanUp:function(){this.DCS={},this.WT={},this.DCSext={},arguments.length%2==0&&this.dcsSetProps(arguments)},dcsSetProps:function(t){if(t)for(var e=0,i=t.length;e<i;e+=2)0==t[e].indexOf("WT.")?this.WT[t[e].substring(3)]=t[e+1]:0==t[e].indexOf("DCS.")?this.DCS[t[e].substring(4)]=t[e+1]:0==t[e].indexOf("DCSext.")&&(this.DCSext[t[e].substring(7)]=t[e+1])},dcsSaveProps:function(t){var e,i;if(this.preserve){this.args=[];for(var n=0,s=t.length;n<s;n+=2)i=t[n],0==i.indexOf("WT.")?(e=i.substring(3),this.args.push(i,this.WT[e]||"")):0==i.indexOf("DCS.")?(e=i.substring(4),this.args.push(i,this.DCS[e]||"")):0==i.indexOf("DCSext.")&&(e=i.substring(7),this.args.push(i,this.DCSext[e]||""))}},dcsRestoreProps:function(){this.preserve&&(this.dcsSetProps(this.args),this.args=[])},dcsVar:function(){var s=new Date,r=this,a=this.WT,c=this.DCS;if(a.tz=parseInt(s.getTimezoneOffset()/60*-1)||"0",a.bh=s.getHours()||"0",a.ul=i.language||i.userLanguage,"object"==typeof screen&&(a.cd="Netscape"==i.appName?screen.pixelDepth:screen.colorDepth,a.sr=screen.width+"x"+screen.height),"boolean"==typeof i.javaEnabled()&&(a.jo=i.javaEnabled()?"Yes":"No"),e.title)if(t.RegExp){var d=new RegExp("^"+n.protocol+"//"+n.hostname+"\\s-\\s");a.ti=e.title.replace(d,"")}else a.ti=e.title;if(a.js="Yes",a.jv=function(){var t=navigator.userAgent.toLowerCase(),e=parseInt(navigator.appVersion),i=t.indexOf("mac")!=-1,n=t.indexOf("firefox")!=-1,s=t.indexOf("firefox/0.")!=-1,r=t.indexOf("firefox/1.0")!=-1,o=t.indexOf("firefox/1.5")!=-1,a=t.indexOf("firefox/2.0")!=-1,c=n&&!s&&!r&!o&!a,d=!n&&t.indexOf("mozilla")!=-1&&t.indexOf("compatible")==-1,h=d&&4==e,f=d&&e>=5,l=t.indexOf("msie")!=-1&&t.indexOf("opera")==-1,u=l&&4==e&&t.indexOf("msie 4")!=-1,g=l&&!u,p=t.indexOf("opera")!=-1,v=t.indexOf("opera 5")!=-1||t.indexOf("opera/5")!=-1,m=t.indexOf("opera 6")!=-1||t.indexOf("opera/6")!=-1,C=p&&!v&&!m,T="1.1";return c?T="1.8":a?T="1.7":o?T="1.6":s||r||f||C?T="1.5":i&&g||m?T="1.4":g||h||v?T="1.3":u&&(T="1.2"),T}(),a.ct="unknown",e.body&&e.body.addBehavior)try{e.body.addBehavior("#default#clientCaps"),a.ct=e.body.connectionType||"unknown",e.body.addBehavior("#default#homePage"),a.hp=e.body.isHomePage(location.href)?"1":"0"}catch(t){r.errorlogger(t)}var h=0,f=0;if("number"==typeof t.innerWidth?(h=t.innerWidth,f=t.innerHeight):e.documentElement&&(e.documentElement.clientWidth||e.documentElement.clientHeight)?(h=e.documentElement.clientWidth,f=e.documentElement.clientHeight):e.body&&(e.body.clientWidth||e.body.clientHeight)&&(h=e.body.clientWidth,f=e.body.clientHeight),a.bs=h+"x"+f,a.fv=function(){var e;if(t.ActiveXObject)for(e=15;e>0;e--)try{return new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+e),e+".0"}catch(t){r.errorlogger(t)}else if(i.plugins&&i.plugins.length)for(e=0;e<i.plugins.length;e++)if(i.plugins[e].name.indexOf("Shockwave Flash")!=-1)return i.plugins[e].description.split(" ")[2];return"Not enabled"}(),a.slv=function(){var t="Not enabled";try{if(i.userAgent.indexOf("MSIE")!=-1){new ActiveXObject("AgControl.AgControl")&&(t="Unknown")}else i.plugins["Silverlight Plug-In"]&&(t="Unknown")}catch(t){r.errorlogger(t)}if("Not enabled"!=t){var e,n,s,o;if("object"==typeof Silverlight&&"function"==typeof Silverlight.isInstalled){for(e=9;e>0&&(s=e,!Silverlight.isInstalled(s+".0"))&&t!=s;e--);for(n=9;n>=0;n--){if(o=s+"."+n,Silverlight.isInstalled(o)){t=o;break}if(t==o)break}}}return t}(),this.i18n&&("string"==typeof e.defaultCharset?a.le=e.defaultCharset:"string"==typeof e.characterSet?a.le=e.characterSet:a.le="unknown"),a.tv=o.version,a.sp=this.splitvalue,a.dl="0",o.qryparams&&o.qryparams.fb_ref&&(a.fb_ref=o.qryparams.fb_ref),o.qryparams&&o.qryparams.fb_source&&(a.fb_source=o.qryparams.fb_source),a.ssl=0==n.protocol.indexOf("https:")?"1":"0",c.dcsdat=s.getTime(),c.dcssip=n.hostname,c.dcsuri=n.pathname,a.es=c.dcssip+c.dcsuri,n.search&&(c.dcsqry=n.search),c.dcsqry)for(var l=c.dcsqry.toLowerCase(),u=this.paidsearchparams.length?this.paidsearchparams.toLowerCase().split(","):[],g=0;g<u.length;g++)if(l.indexOf(u[g]+"=")!=-1){a.srch="1";break}""!=e.referrer&&"-"!=e.referrer&&("Microsoft Internet Explorer"==i.appName&&parseInt(i.appVersion)<4||(c.dcsref=e.referrer)),c.dcscfg=this.TPCConfig.cfgType},dcsEscape:function(t,e){if(""!=e){if(null===t||void 0===t)return"";t=t.toString();for(var i in e)e[i]instanceof RegExp&&(t=t.replace(e[i],i));return t}return escape(t)},dcsA:function(t,e){if(this.i18n&&""!=this.exre&&!this.exre.test(t))if("dcsqry"==t){for(var i="",n=e.substring(1).split("&"),s=0;s<n.length;s++){var r=n[s],a=r.indexOf("=");if(a!=-1){var c=r.substring(0,a),d=r.substring(a+1);0!=s&&(i+="&"),i+=c+"="+o.dcsEncode(d)}}e=e.substring(0,1)+i}else e=o.dcsEncode(e);return"&"+t+"="+this.dcsEscape(e,this.re)},dcsCreateImage:function(i,n){if(e.images){var s=new Image;if(this.images.push(s),2===arguments.length&&n&&o.isFn(n.callback)){var r=!1,a=n.callback,c=n,d=this;s.onload=function(){if(!r)return r=!0,a(d,c),!0},t.setTimeout(function(){if(!r)return r=!0,a(d,c),!0},o.dcsdelay)}s.src=i}},dcsMeta:function(){var t;if(e.documentElement?t=e.getElementsByTagName("meta"):e.all&&(t=e.all.tags("meta")),void 0!==t)for(var i=t.length,n=0;n<i;n++){var s=t.item(n).name,r=t.item(n).content;t.item(n).httpEquiv;s.length>0&&(s=s.toLowerCase(),0==s.toUpperCase().indexOf("WT.")?this.WT[s.substring(3)]=r:0==s.toUpperCase().indexOf("DCSEXT.")?this.DCSext[s.substring(7)]=r:0==s.toUpperCase().indexOf("DCS.")?this.DCS[s.substring(4)]=r:this.metanames&&this.metanames.indexOf(s)!=-1&&(this.DCSext["meta_"+s]=r))}},dcsTag:function(t){if(e.cookie.indexOf("WTLOPTOUT=")==-1){var i=this.WT,s=this.DCS,r=this.DCSext,a=this.i18n,c="http"+(0==n.protocol.indexOf("https:")?"s":"")+"://"+this.domain+(""==this.dcsid?"":"/"+this.dcsid)+"/dcs.gif?";a&&(i.dep="");for(var d in s)""!=s[d]&&void 0!=s[d]&&"function"!=typeof s[d]&&(c+=this.dcsA(d,s[d]));for(d in i)""!=i[d]&&void 0!=i[d]&&"function"!=typeof i[d]&&(c+=this.dcsA("WT."+d,i[d]));for(d in r)""!=r[d]&&void 0!=r[d]&&"function"!=typeof r[d]&&(a&&(i.dep=0==i.dep.length?d:i.dep+";"+d),c+=this.dcsA(d,r[d]));a&&i.dep.length>0&&(c+=this.dcsA("WT.dep",i.dep)),o.IE&&o.IE<9&&c.length>2048&&(c=c.substring(0,2040)+"&WT.tu=1"),this.dcsCreateImage(c,t),this.WT.ad=""}},pageAnalyze:function(){this.dcsVar(),this.dcsMeta(),this.adclickparam&&this.adclickparam.length>0&&this.dcsAdSearch(),this.pageAnalyzehasRun=!0},getTime:function(){return(new Date).getTime()},dumpCounter:0,spinLock:function(t){for(var e=this.getTime();this.getTime()-e<t;)this.dumpCounter++},dcsCollect:function(){return this.track.apply(this,arguments)},enQueue:function(t,e){t||(t="collect"),this.queue.push({action:t,message:e})},doAction:function(t){var e="action_"+t.action,i=t.message;if(this.pageAnalyzehasRun||this.pageAnalyze(),i.event&&!i.element&&(i.element=o.elemOfEvent(i.event,{A:1})),!o.isFn(i.filter)||!i.filter(this,i)){if(i.args){i.argsa=i.argsa||[];for(var n in i.args)i.argsa.push(n,i.args[n])}i.element&&i.element.getAttribute&&i.element.getAttribute("data-wtmt")&&(i.argsa=i.argsa.concat(i.element.getAttribute("data-wtmt").split(","))),a("transform."+t.action,this,i),a("transform.all",this,i),i.transform&&o.isFn(i.transform)&&i.transform(this,i),this.enabled&&(this.dcsFPC(),o.isFn(this[e])&&this[e](i),a("finish."+t.action,this,i),a("finish.all",this,i),i.finish&&o.isFn(i.finish)&&i.finish(this,i))}},action_multitrack:function(t){var e=t&&t.argsa&&t.argsa.length%2==0;e&&(this.dcsSaveProps(t.argsa),this.dcsSetProps(t.argsa)),this.DCS.dcsdat=this.getTime(),this.dcsTag(t),e&&this.dcsRestoreProps()},action_collect:function(t){t&&t.argsa&&t.argsa.length%2==0&&this.dcsSetProps(t.argsa),this.dcsTag(t)},getURIArrFromEvent:function(e){var i=document.createElement("a");i.href=e.href;var n={};return n.dcssip=i.hostname?i.hostname.split(":")[0]:window.location.hostname,n.dcsuri=i.pathname?0!=i.pathname.indexOf("/")?"/"+i.pathname:i.pathname:"/",n.dcsqry=i.search?"?"+i.search.substring(i.search.indexOf("?")+1,i.search.length):"",n.dcsref=t.location,n},dcsIsOnsite:function(t,e){if(t.length>0){if((t=t.toLowerCase())==window.location.hostname.toLowerCase())return!0;if(o.isFn(e.test))return e.test(t);if(e.length>0)for(var i=e.length,n=0;n<i;n++)if(t==e[n])return!0}return!1},dcsTypeMatch:function(t,e){for(var i=t.toLowerCase().substring(t.lastIndexOf(".")+1,t.length),n=e.length,s=0;s<n;s++)if(i==e[s])return!0;return!1},dcsNavigation:function(t,e){var i,n,s,r="",a="",c=e.length;for(i=0;i<c&&(s=e[i],!(s.length&&(n=o.elemOfEvent(t,s),r=n.getAttribute&&n.getAttribute("id")?n.getAttribute("id"):"",a=n.className||"",r.length||a.length)));i++);return r.length?r:a},getTTL:function(t,i,n){var s,r=e.all?i.innerText:i.text,a=o.elemOfEvent(t,{IMG:1});return a&&a.alt?s="IMG: "+a.alt:r?s=r:i.innerHTML&&(s=i.innerHTML),s||n},_autoEvtSetup:function(){this.preserve||(this.preserve=!0,this._overridePreserve=!0)},_autoEvtCleanup:function(){this.preserve=!1,this._overridePreserve=!1},_isRightClick:function(t){var e=!1;if(!t)var t=window.event;return t.which?e=3==t.which:t.button&&(e=2==t.button),e},addOffsiteTracking:function(){this.addSelector("a",{filter:function(t,e){var i=e.element||{},n=e.event||{};return!(i.hostname&&!t.dcsIsOnsite(i.hostname,t._onsitedoms)&&!t._isRightClick(n))},transform:function(t,e){var i=e.event||{},n=e.element||{};t._autoEvtSetup(e);var s=t.getURIArrFromEvent(n),r=t.getTTL(i,n,s.dcsuri);e.argsa.push("DCS.dcssip",s.dcssip,"DCS.dcsuri",s.dcsuri,"DCS.dcsqry",s.dcsqry,"DCS.dcsref",s.dcsref,"WT.ti","Offsite:"+s.dcssip+s.dcsuri+s.dcsqry,"WT.ihtml",r,"WT.dl","24","WT.nv",t.dcsNavigation(i,t.navigationtag))},finish:function(t,e){t._autoEvtCleanup()}})},addFormButtonTracking:function(){this.addSelector("button, input",{filter:function(t,e){var i=e.event||{},n=e.element||{};if(i&&("number"!=typeof i.which||1==i.which)){var s=n.type||"";if(s&&("submit"==s||"image"==s||"button"==s||"reset"==s)||"text"==s&&13==(i.which||i.keyCode))return!1}return!0},transform:function(t,e){var i=e.event||{},n=e.element||{};t._autoEvtSetup(e);var s=t.getURIArrFromEvent(n),r=t.getTTL(i,n,s.dcsuri),o=0;n.form?(s.dcsuri=n.form.getAttribute("action")||s.dcsuri,ttl=n.form.id||n.form.name||n.form.className||ttl,o=n.form.method&&"post"==n.form.method.toLowerCase()?"27":"26"):(ttl=n.name||n.id||ttl,o="input"==n.tagName.toLowerCase()?"28":"29"),e.argsa.push("DCS.dcssip","","DCS.dcsuri",s.dcsuri,"DCS.dcsqry","","WT.ti","FormButton:"+ttl,"WT.ihtml",ttl,"WT.dl",o,"WT.nv",t.dcsNavigation(i,t.navigationtag),"WT.btnhtml",r)},finish:function(t,e){t._autoEvtCleanup()}})},addAnchorTracking:function(t){this.addSelector("a",{filter:function(t,e){var i=e.element||{},n=e.event||{};return!(t.dcsIsOnsite(i.hostname,t._onsitedoms)&&i.hash&&""!=i.hash&&"#"!=i.hash&&!t._isRightClick(n))},transform:function(t,e){var i=e.event||{},n=e.element||{};t._autoEvtSetup(e);var s=t.getURIArrFromEvent(n),r=t.getTTL(i,n,s.dcsuri);e.argsa.push("DCS.dcssip",s.dcssip,"DCS.dcsuri",s.dcsuri+e.element.hash,"DCS.dcsqry",s.dcsqry,"DCS.dcsref",s.dcsref,"WT.ti","Anchor:"+r,"WT.ihtml",r,"WT.nv",t.dcsNavigation(i,t.navigationtag),"WT.dl","21")},finish:function(t,e){t._autoEvtCleanup()}})},addDownloadTracking:function(){this.addSelector("a",{filter:function(t,e){var i=e.element||{},n=e.event||{};return!(t.dcsTypeMatch(i.pathname,t._downloadtypes)&&t.dcsIsOnsite(i.hostname,t._onsitedoms)&&!t._isRightClick(n))},transform:function(t,e){var i=e.event||{},n=e.element||{};t._autoEvtSetup(e);var s=t.getURIArrFromEvent(n),r=t.getTTL(i,n,s.dcsuri);e.argsa.push("DCS.dcssip",s.dcssip,"DCS.dcsuri",s.dcsuri,"DCS.dcsqry",s.dcsqry,"DCS.dcsref",s.dcsref,"WT.ti","Download:"+r,"WT.ihtml",r,"WT.nv",t.dcsNavigation(i,t.navigationtag),"WT.dl","20")},finish:function(t,e){t._autoEvtCleanup()}})},addRightClickTracking:function(){this.addSelector("a",{filter:function(t,e){var i=e.element||{},n=e.event||{};return!t.dcsTypeMatch(i.pathname,t._downloadtypes)||!t._isRightClick(n)},transform:function(t,e){var i=e.event||{},n=e.element||{};t._autoEvtSetup(e);var s=t.getURIArrFromEvent(n),r=t.getTTL(i,n,s.dcsuri);e.argsa.push("DCS.dcssip",s.dcssip,"DCS.dcsuri",s.dcsuri,"DCS.dcsqry",s.dcsqry,"DCS.dcsref",s.dcsref,"WT.ti","RightClick:"+r,"WT.ihtml",r,"WT.nv",t.dcsNavigation(i,t.navigationtag),"WT.dl","25")},finish:function(t,e){t._autoEvtCleanup()}})},addJavaScriptTracking:function(){this.addSelector("a",{filter:function(t,e){var i=e.element||{};e.event;return!i.href||!i.protocol||"javascript:"!==i.protocol.toLowerCase()},transform:function(e,i){var n=i.event||{},s=i.element||{};e._autoEvtSetup(i);var r=e.getURIArrFromEvent(s),o=e.getTTL(n,s,r.dcsuri);i.argsa.push("DCS.dcssip",t.location.hostname,"DCS.dcsuri",s.href,"DCS.dcsqry",r.dcsqry,"DCS.dcsref",r.dcsref,"WT.ti","JavaScript:"+(s.innerHTML?s.innerHTML:""),"WT.ihtml",o,"WT.dl","22","WT.nv",e.dcsNavigation(n,e.navigationtag))},finish:function(t,e){t._autoEvtCleanup()}})},addMailToTracking:function(){this.addSelector("a",{filter:function(t,e){var i=e.element||{};e.event;return!i.href||!i.protocol||"mailto:"!==i.protocol.toLowerCase()},transform:function(e,i){var n=i.event||{},s=i.element||{};e._autoEvtSetup(i);var r=e.getURIArrFromEvent(s),o=e.getTTL(n,s,r.dcsuri);i.argsa.push("DCS.dcssip",t.location.hostname,"DCS.dcsuri",s.href,"DCS.dcsqry",r.dcsqry,"DCS.dcsref",r.dcsref,"WT.ti","MailTo:"+(s.innerHTML?s.innerHTML:""),"WT.ihtml",o,"WT.dl","23","WT.nv",e.dcsNavigation(n,e.navigationtag))},finish:function(t,e){t._autoEvtCleanup()}})},addOnsiteTracking:function(){this.addSelector("a",{filter:function(t,e){var i=e.element||{},n=e.event||{};return!(i.hostname&&function(){var t=["app.toronto.ca","booking.toronto.ca","efun.toronto.ca","map.toronto.ca","secure.toronto.ca","wx.toronto.ca"];for(keys in t)if(i.hostname.indexOf(t[keys])!==-1&&document.domain.indexOf(t[keys])===-1)return!0;return!1}()&&!t._isRightClick(n))},transform:function(t,e){var i=e.event||{},n=e.element||{};t._autoEvtSetup(e);var s=t.getURIArrFromEvent(n),r=t.getTTL(i,n,s.dcsuri);e.argsa.push("DCS.dcssip",s.dcssip,"DCS.dcsuri",s.dcsuri,"DCS.dcsqry",s.dcsqry,"DCS.dcsref",s.dcsref,"WT.ti","Onsite:"+s.dcssip+s.dcsuri+s.dcsqry,"WT.ihtml",r,"WT.dl","204","WT.nv",t.dcsNavigation(i,t.navigationtag))},finish:function(t,e){t._autoEvtCleanup()}})},dcsAdSearch:function(){if(e.links){var t,i=this.adclickparam+"=",n=i.length,s=new RegExp(i,"i"),r=e.links.length,o=end=-1,a=urlp=value="",c=e.URL+"",d=c.search(s);d!=-1&&(end=c.indexOf("&",d),urlp=c.substring(d,end!=-1?end:c.length),t=new RegExp(urlp+"(&|#)","i"));for(var h=0;h<r;h++)e.links[h].href&&(a=e.links[h].href+"",urlp.length>0&&(a=a.replace(t,"$1")),(o=a.search(s))!=-1&&(d=o+n,end=a.indexOf("&",d),value=a.substring(d,end!=-1?end:a.length),this.WT.ad=this.WT.ad?this.WT.ad+";"+value:value))}}},o.dcs.prototype.action_multitrack_multitrack=o.dcs.prototype.action_multitrack,o.dcs.prototype.action_collect=o.dcs.prototype.action_collect,t.dcsMultiTrack=r,t.Webtrends=o,t.WebTrends=o,t.WT=t.Webtrends,o.multiTrack=o.multiTrack,o.dcs=o.dcs,o.dcss=o.dcss,o.addTransform=o.addTransform,o.bindEvent=o.bindEvent,o.getQryParams=o.getQryParams,o.qryparams=o.qryparams,o.dcsdelay=o.dcsdelay,o.find=o.find,o.loadJS=o.loadJS,o.registerPlugin=o.registerPlugin,o.dcsGetCookie=o.dcsGetCookie,o.dcs.prototype.init=o.dcs.prototype.init,o.dcs.prototype.dcsMultiTrack=o.dcs.prototype.dcsMultiTrack,o.dcs.prototype.track=o.dcs.prototype.track,o.dcs.prototype.addSelector=o.dcs.prototype.addSelector,o.dcs.prototype.dcsGetIdCallback=o.dcs.prototype.dcsGetIdCallback,o.dcs.prototype.dcsCleanUp=o.dcs.prototype.dcsCleanUp,o.dcs.prototype.dcsGetFPC=o.dcs.prototype.dcsGetFPC,o.dcs.prototype.addTransform=o.dcs.prototype.addTransform,o.dcs.prototype.dcsGetCookie=o.dcs.prototype.dcsGetCookie,o.dcs.prototype.dcsNavigation=o.dcs.prototype.dcsNavigation,o.dcs.prototype.getTTL=o.dcs.prototype.getTTL,o.init()}}(window,window.document,window.navigator,window.location);